<!DOCTYPE HTML>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pandas: Styler でデータフレームの見た目をカスタマイズする - Cookie Box</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-coy.min.css" integrity="sha512-LOT5F67SMZVdXMrvQe4S1ZHu5l6xk3CST2qqno9kY329OsJBBpybnq+fM9qG4ZSaNzPOjoGzHAeBamSSJyyuZg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js" integrity="sha512-AKaNmg8COK0zEbjTdMHJAPJ0z6VeNqvRvH4/d5M4sHJbQQUToMBtodq4HaV4fa+WV2UTfoperElm66c9/8cKmQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" type="text/css" href="../../style.css">
<link rel="stylesheet" type="text/css" href="../../css/jupyter.css">
<script defer id="app" src="../../funcs.js" data-mainpage="false" data-lang="ja"></script>
</head>
<body>
<div class="container">
<div id="sidebar"></div>
<main class="main">
<div id="smartphone-header"></div>
<div class="item">
<h1>Pandas: Styler でデータフレームの見た目をカスタマイズする</h1>

<div class="categories">
<a href="../categories/category_pandas.html">Pandas</a>
</div>
<div class="summary">
&#x1f36a;この記事の内容:
<ul>
<li>pandas.DataFrame で表全体 / 列にスタイルを適用する方法。</li>
<li>pandas.DataFrame で行ごとの 1 位と 2 位を目立たせる方法。</li>
</ul>
</div>

<h2>参考文献</h2>
<ol class="ref small">
<li>pandas.io.formats.style.Styler &#8212; pandas 2.3.2 documentation, <a class="asis" href="https://pandas.pydata.org/docs/dev/reference/api/pandas.io.formats.style.Styler.html"></a>, 2025年9月26日参照.</li>
</ol>

<h2>[参考] そのまま表示する</h2>
Jupyter Notebook 上でデータフレームを表示すると以下のように右揃え・偶数行グレーになる (スタイルは大まかに真似たもので、Jupyter Notebook のバージョンにもよると思われる)。df.to_html() を別の HTML に埋め込む場合はそちらでの規定のテーブルスタイルによる。
<pre class="language-python"><code>
from IPython.display import HTML, display
import pandas as pd

df = pd.DataFrame({
    'Task Name': ['Task 1', 'Task 2', 'Task 3', 'Task 4'],
    'Model A Loss': [0.1, 0.3, 0.1, 0.1],
    'Model B Loss': [0.2, 0.1, 0.3, 0.1],
    'Model C Loss': [0.3, 0.2, 0.1, 0.1],
})

display(HTML(df.to_html()))
</code></pre>
<div class="jupyter">
<table border="1" class="dataframe">
<thead>
<tr>
<th></th>
<th>Task Name</th>
<th>Model A Loss</th>
<th>Model B Loss</th>
<th>Model C Loss</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Task 1</td>
<td>0.1</td>
<td>0.2</td>
<td>0.3</td>
</tr>
<tr>
<th>1</th>
<td>Task 2</td>
<td>0.3</td>
<td>0.1</td>
<td>0.2</td>
</tr>
<tr>
<th>2</th>
<td>Task 3</td>
<td>0.1</td>
<td>0.3</td>
<td>0.1</td>
</tr>
<tr>
<th>3</th>
<td>Task 4</td>
<td>0.1</td>
<td>0.1</td>
<td>0.1</td>
</tr>
</tbody>
</table>
</div>

<h2>表全体 / 列にスタイルを適用する (セルの値によらず)</h2>

<pre class="language-python"><code>
from IPython.display import HTML, display
import pandas as pd

df = pd.DataFrame({
    'Task Name': ['Task 1', 'Task 2', 'Task 3', 'Task 4'],
    'Model A Loss': [0.1, 0.3, 0.1, 0.1],
    'Model B Loss': [0.2, 0.1, 0.3, 0.1],
    'Model C Loss': [0.3, 0.2, 0.1, 0.1],
})

styled = df.style.set_table_styles([  # 表全体のスタイル変更
    {'selector': 'th,td', 'props': [('border', '1px solid darkgray')]},
    {'selector': 'th', 'props': [('background', 'lightgray')]},
    {'selector': 'td', 'props': [('background', 'white')]},
    # 0列目の左揃えは以下でも可
    # {'selector': 'td.col0', 'props': [('text-align', 'left')]},
]).set_properties(  # 指定の列を左揃え
    subset=['Task Name'], **{'text-align': 'left'},
).format(  # 指定の列の数値をフォーマット
    {f'Model {c} Loss': '{:.3f}' for c in 'ABC'},
).hide(axis=0)  # インデクス列を隠す

display(HTML(styled.to_html()))
</code></pre>
<div class="jupyter">
<table id="T_667c6">
<thead>
<tr>
<th class="col_heading level0 col0" id="T_667c6_level0_col0">Task Name</th>
<th class="col_heading level0 col1" id="T_667c6_level0_col1">Model A Loss</th>
<th class="col_heading level0 col2" id="T_667c6_level0_col2">Model B Loss</th>
<th class="col_heading level0 col3" id="T_667c6_level0_col3">Model C Loss</th>
</tr>
</thead>
<tbody>
<tr>
<td class="data row0 col0" id="T_667c6_row0_col0">Task 1</td>
<td class="data row0 col1" id="T_667c6_row0_col1">0.100</td>
<td class="data row0 col2" id="T_667c6_row0_col2">0.200</td>
<td class="data row0 col3" id="T_667c6_row0_col3">0.300</td>
</tr>
<tr>
<td class="data row1 col0" id="T_667c6_row1_col0">Task 2</td>
<td class="data row1 col1" id="T_667c6_row1_col1">0.300</td>
<td class="data row1 col2" id="T_667c6_row1_col2">0.100</td>
<td class="data row1 col3" id="T_667c6_row1_col3">0.200</td>
</tr>
<tr>
<td class="data row2 col0" id="T_667c6_row2_col0">Task 3</td>
<td class="data row2 col1" id="T_667c6_row2_col1">0.100</td>
<td class="data row2 col2" id="T_667c6_row2_col2">0.300</td>
<td class="data row2 col3" id="T_667c6_row2_col3">0.100</td>
</tr>
<tr>
<td class="data row3 col0" id="T_667c6_row3_col0">Task 4</td>
<td class="data row3 col1" id="T_667c6_row3_col1">0.100</td>
<td class="data row3 col2" id="T_667c6_row3_col2">0.100</td>
<td class="data row3 col3" id="T_667c6_row3_col3">0.100</td>
</tr>
</tbody>
</table>
</div>

<h2>行ごとの 1 位と 2 位を目立たせる</h2>

<pre class="language-python"><code>
from IPython.display import HTML, display
import pandas as pd

conf_color = {  # 何位の背景色を何色にするかの設定
    1: 'background: #8dce6f !important;',  # 1 位は緑
    2: 'background: #ccf188 !important;',  # 2 位は黄緑
}

def _highlight(row):
    rank = row.rank(ascending=True, method='min')
    return rank.map(lambda x: conf_color.get(x, ''))

df = pd.DataFrame({
    'Task Name': ['Task 1', 'Task 2', 'Task 3', 'Task 4'],
    'Model A Loss': [0.1, 0.3, 0.1, 0.1],
    'Model B Loss': [0.2, 0.1, 0.3, 0.1],
    'Model C Loss': [0.3, 0.2, 0.1, 0.1],
})

styled = df.style \
    .set_table_styles([
        {'selector': 'th,td', 'props': [('border', '1px solid darkgray')]},
        {'selector': 'th', 'props': [('background', 'lightgray')]},
        {'selector': 'td', 'props': [('background', 'white')]}]) \
    .set_properties(subset=['Task Name'], **{'text-align': 'left'}) \
    .apply(_highlight, axis=1, subset=[f'Model {c} Loss' for c in 'ABC']) \
    .format({f'Model {c} Loss': '{:.3f}' for c in 'ABC'})
display(HTML(styled.hide(axis=0).to_html()))
</code></pre>
<div class="jupyter">
<table id="T_a5ee7">
<thead>
<tr>
<th class="col_heading level0 col0" id="T_a5ee7_level0_col0">Task Name</th>
<th class="col_heading level0 col1" id="T_a5ee7_level0_col1">Model A Loss</th>
<th class="col_heading level0 col2" id="T_a5ee7_level0_col2">Model B Loss</th>
<th class="col_heading level0 col3" id="T_a5ee7_level0_col3">Model C Loss</th>
</tr>
</thead>
<tbody>
<tr>
<td class="data row0 col0" id="T_a5ee7_row0_col0">Task 1</td>
<td class="data row0 col1" id="T_a5ee7_row0_col1">0.100</td>
<td class="data row0 col2" id="T_a5ee7_row0_col2">0.200</td>
<td class="data row0 col3" id="T_a5ee7_row0_col3">0.300</td>
</tr>
<tr>
<td class="data row1 col0" id="T_a5ee7_row1_col0">Task 2</td>
<td class="data row1 col1" id="T_a5ee7_row1_col1">0.300</td>
<td class="data row1 col2" id="T_a5ee7_row1_col2">0.100</td>
<td class="data row1 col3" id="T_a5ee7_row1_col3">0.200</td>
</tr>
<tr>
<td class="data row2 col0" id="T_a5ee7_row2_col0">Task 3</td>
<td class="data row2 col1" id="T_a5ee7_row2_col1">0.100</td>
<td class="data row2 col2" id="T_a5ee7_row2_col2">0.300</td>
<td class="data row2 col3" id="T_a5ee7_row2_col3">0.100</td>
</tr>
<tr>
<td class="data row3 col0" id="T_a5ee7_row3_col0">Task 4</td>
<td class="data row3 col1" id="T_a5ee7_row3_col1">0.100</td>
<td class="data row3 col2" id="T_a5ee7_row3_col2">0.100</td>
<td class="data row3 col3" id="T_a5ee7_row3_col3">0.100</td>
</tr>
</tbody>
</table>
</div>

<!--
<pre class="language-python"><code>
</code></pre>
<div class="jupyter">
</div>
-->

</div>
</main>
</div>
</body>
</html>
